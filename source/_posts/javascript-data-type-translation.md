title: Javascript数据类型转换
date: 2014-09-28 16:09:17
tags: [Javascript]
categories: 前端
---

好久没写博客了，最近也忙着实习和准备各种笔试面试，没能面上阿里的前端确实很遗憾，但是学习还得继续，今天就分享篇百度笔试中遇到的数据类型转换题，考的时候自己记错了，全做错了，写篇博客，加深记忆。

<!-- more -->

百度的题目,具体数值可能不一样，大概题型是这样的：

> 写出下列语句的输出：
  console.log(1 + "3" + "2");
  console.log(1 - "3" + "2")
  console.log(1 + +"3" + "2");
  console.log(1 + -"3" + "2");
  console.log(+"1" + "2" + "2");
  console.log("A" - "B" + "2");
  console.log("A" - "B" + 2);

考完后回来查过资料，才知道自己的记忆和理解全错了，javascript里面的自动类型转换有很多规则，这里先只列举与上面的题目相关的：


**1.加法运算符的类型转换**
1)运算子中存在字符串
两个运算子之中，只要有一个是字符串，则另一个不管是什么类型，都会被自动转为字符串，然后执行字符串连接运算。
2)两个运算子都为数值或布尔值
这种情况下，执行加法运算，布尔值转为数值（true为1，false为0）
```javascript
true + 5 //6
true + true //2
```
3)运算子之中存在对象
运算子之中存在对象（或者准确地说，存在非原始类型的值），则先调用该对象的valueOf方法。如果返回结果为原始类型的值，则运用上面两条规则；否则继续调用该对象的toString方法，对其返回值运用上面两条规则。

**2.除了加法运算符有可能把运算子转为字符串，其他运算符都会把两侧的运算子自动转成数值**
1)二元算术运算符
```javascript
'5' - '2' // 3
'5' * '2' // 10
true - 1 // 0
false - 1 // -1
'1' - 1 // 0
'5'*[] // 0
false/'5' // 0
'abc'-1 // NaN
```
2)一元算术运算符
单个的正号和负号也会把运算子自动转换为数值
```javascript
+'abc' // NaN
-'abc' // NaN
+true // 1
-false // 0
```

所以正确的解答如下：
```javascript
console.log(1 + "3" + "2"); //"132"     
//等于"1"+"3"+"2"
console.log(1 - "3" + "2"); //"22" 
//等于1-3的结果-2转换为字符串"-2"+"2"
console.log(1 + +"3" + "2"); //"42"
//网上没有找到这种写法，但是猜测是第二个加号被识别为一元运算符，优先级更高，等于1+3+"2"
console.log(1 + -"3" + "2"); //"-22" 
//原理同上
console.log(+"1" + "2" + "2"); //"122" 
//虽然第一个加号将"1"转换为1,但是之后又是与2个字符串相加
console.log("A" - "B" + "2"); //"NaN2" 
//"A"-"B"会先转换为数值再相减，但是字符串"A"、"B"无法转换为数值，所以得到NaN,NaN与"2"相加，转换为字符串"NaN"
console.log("A" - "B" + 2); //NaN 
//前面结果同上，但NaN虽然没有值，但是也是特殊的number类型，所以与2相加结果仍为NaN
```

这里有篇关于[javascript数据类型转换](http://www.css88.com/archives/5199)的文章总结的非常好，本文就是摘抄的它的部分内容。